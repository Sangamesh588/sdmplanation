<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SDB Plantation ‚Äî Wholesale Bananas</title>
  <meta name="description" content="SDB Plantation ‚Äî Farm fresh wholesale bananas. Contact for bulk orders, pricing and delivery." />
  <link rel="icon" href="/assets/favicon.ico" />

  <style>
    :root{
      --green:#2bbb45;
      --dark:#0f1724;
      --muted:#6b7280;
      --accent:#f7d94c;
      --max-width:1100px;
      --card-radius:14px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;color:var(--dark);}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;height:auto;display:block}
    .wrap{max-width:var(--max-width);margin:24px auto;padding:0 16px}
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center;text-decoration:none}
    .brand img{width:64px;height:64px;object-fit:contain;border-radius:8px}
    .brand h1{font-size:20px;margin:0}
    .nav{display:flex;gap:14px;align-items:center}
    .nav a{padding:8px 12px;border-radius:8px;color:var(--muted);font-weight:600}
    .cta{background:var(--green);color:#fff;padding:8px 12px;border-radius:8px}

    /* layout */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:start;margin-top:18px}
    .lead{font-size:18px;line-height:1.45}
    .hero h2{font-size:32px;margin:4px 0}
    .kpis{display:flex;gap:12px;margin-top:16px}
    .kpi{background:#f6f9f5;padding:10px 12px;border-radius:12px;text-align:center}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:18px;align-items:start}
    .card{border-radius:var(--card-radius);overflow:hidden;box-shadow:0 6px 18px rgba(15,23,36,0.06);border:1px solid #eef2e7;background:#fff;display:flex;flex-direction:column}
    .card .media{height:180px;overflow:hidden}
    .card img{width:100%;height:100%;object-fit:cover;transition:transform .35s ease}
    .card img:hover{transform:scale(1.05)}
    .card .body{padding:12px;flex:1;display:flex;flex-direction:column}
    .price{font-weight:700;color:var(--green);margin-top:6px}

    .form-card{background:#fff;padding:16px;border-radius:12px;border:1px solid #eef2e7;position:sticky;top:18px}
    form .row{display:flex;gap:8px}
    form .col{flex:1;display:flex;flex-direction:column;margin-bottom:10px}
    label{font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=text],input[type=tel],input[type=email],select,textarea{padding:10px;border-radius:10px;border:1px solid #e6e9ed;font-size:15px;background:#fff}
    textarea{min-height:110px;resize:vertical}

    /* modern small address */
    .address-row input{width:100%;}

    .btn{background:var(--green);color:#fff;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid var(--green);color:var(--green)}
    .muted{color:var(--muted);font-size:13px}
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
    footer{margin-top:40px;padding:20px 0;color:var(--muted);border-top:1px solid #f0f2f1}
    .whatsapp{position:fixed;right:16px;bottom:16px;background:#25D366;color:#fff;padding:14px;border-radius:999px;box-shadow:0 8px 24px rgba(0,0,0,0.15);display:flex;align-items:center;gap:8px;font-weight:700}
    .whatsapp img{width:20px;height:20px}

    /* cart drawer */
    .cart-btn{position:fixed;right:16px;bottom:86px;background:var(--accent);padding:12px;border-radius:999px;box-shadow:0 8px 30px rgba(0,0,0,0.12);font-weight:800;color:#111;cursor:pointer}
    .cart-drawer{position:fixed;right:16px;bottom:150px;width:360px;max-height:70vh;background:#fff;border-radius:12px;box-shadow:0 12px 40px rgba(15,23,36,0.12);overflow:auto;border:1px solid #eef2e7;padding:12px;display:none;flex-direction:column;gap:8px}
    .cart-item{display:flex;gap:10px;align-items:center;border-bottom:1px dashed #eef2e7;padding:8px 0}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty-controls{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:var(--muted)}
    .cart-empty{padding:18px;text-align:center;color:var(--muted)}

    @media (max-width:900px){.hero{grid-template-columns:1fr}.brand img{width:54px;height:54px}}
    @media (max-width:600px){
      .hero{grid-template-columns:1fr!important;gap:16px}
      .cards{grid-template-columns:1fr!important}
      .card .media{height:140px}
      .cart-drawer{right:8px;left:8px;width:auto}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <header>
      <a href="/" class="brand">
        <img src="logo.jpg" alt="SDB Plantation logo" id="logoImg">
        <div>
          <h1 data-i18n="brand_name">SDB Plantation</h1>
          <div class="muted" data-i18n="brand_tag">Wholesale Banana Supplier</div>
        </div>
      </a>
      <nav class="nav">
        <a href="#products" data-i18n="nav_products">Products</a>
        <a href="#gallery" data-i18n="nav_gallery">Gallery</a>
        <a href="#contact" class="cta" data-i18n="nav_contact">Contact Us</a>
        <div class="lang-switch" style="margin-left:8px">
          <button id="btn-en">EN</button>
          <button id="btn-kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>
        </div>
      </nav>
    </header>

    <!-- Hero -->
    <section class="hero">
      <div>
        <div class="muted" data-i18n="hero_sub">Farm ‚Üí Market ¬∑ Fresh daily</div>
        <h2 data-i18n="hero_h1">Fresh wholesale bananas ‚Äî delivered reliably</h2>
        <p class="lead" data-i18n="hero_p">SDB Plantation supplies high-quality bananas (Robusta, Yelakki, Red, Narendra, Karpura) in bulk to retailers, wholesalers and food processors. Local deliveries & pan-state transport.</p>

        <div class="kpis">
          <div class="kpi"><strong data-i18n="kpi_fresh">Fresh daily</strong><span class="muted">From farm to truck</span></div>
          <div class="kpi"><strong data-i18n="kpi_rates">Competitive Rates</strong><span class="muted">Negotiable for regular buyers</span></div>
          <div class="kpi"><strong data-i18n="kpi_dispatch">Quick Dispatch</strong><span class="muted">Same day/Next day</span></div>
        </div>

        <!-- Product cards -->
        <div id="products" class="cards">
          <article class="card" data-id="robusta" data-name="Robusta" data-price="35">
            <div class="media"><img src="robust.jpeg" alt="Robusta bananas"></div>
            <div class="body">
              <h3 data-i18n="prod_robusta">Robusta</h3>
              <div class="muted">Reliable, commonly used variety</div>
              <div class="price">‚Çπ35 / kg</div>
              <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
                <input type="number" class="item-qty" min="1" value="10" style="width:90px;padding:8px;border-radius:8px;border:1px solid #e6e9ed">
                <button class="btn add-cart" aria-label="Add Robusta to cart">Add to cart</button>
              </div>
            </div>
          </article>

          <article class="card" data-id="yelakki" data-name="Yelakki" data-price="60">
            <div class="media"><img src="organik-yellaki-banana-500x500.webp" alt="Yelakki bananas"></div>
            <div class="body">
              <h3 data-i18n="prod_yelakki">Yelakki</h3>
              <div class="muted">Sweet, preferred for retail</div>
              <div class="price">‚Çπ60 / kg</div>
              <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
                <input type="number" class="item-qty" min="1" value="10" style="width:90px;padding:8px;border-radius:8px;border:1px solid #e6e9ed">
                <button class="btn add-cart">Add to cart</button>
              </div>
            </div>
          </article>

          <article class="card" data-id="red" data-name="Red Banana" data-price="48">
            <div class="media"><img src="red bananas.webp" alt="Red bananas"></div>
            <div class="body">
              <h3 data-i18n="prod_red">Red Banana</h3>
              <div class="muted">Good shelf life & quality</div>
              <div class="price">‚Çπ48 / kg</div>
              <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
                <input type="number" class="item-qty" min="1" value="10" style="width:90px;padding:8px;border-radius:8px;border:1px solid #e6e9ed">
                <button class="btn add-cart">Add to cart</button>
              </div>
            </div>
          </article>

          <article class="card" data-id="karpura" data-name="Karpura" data-price="40">
            <div class="media"><img src="karpura.jpeg" alt="Karpura bananas"></div>
            <div class="body">
              <h3 data-i18n="prod_karpura">Karpura</h3>
              <div class="muted">Good shelf life & quality</div>
              <div class="price">‚Çπ40 / kg</div>
              <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
                <input type="number" class="item-qty" min="1" value="10" style="width:90px;padding:8px;border-radius:8px;border:1px solid #e6e9ed">
                <button class="btn add-cart">Add to cart</button>
              </div>
            </div>
          </article>

          <article class="card" data-id="narendra" data-name="Narendra" data-price="38">
            <div class="media"><img src="nendra.jpeg" alt="Narendra bananas"></div>
            <div class="body">
              <h3 data-i18n="prod_narendra">Narendra</h3>
              <div class="muted">Good shelf life & quality</div>
              <div class="price">‚Çπ38 / kg</div>
              <div style="margin-top:auto;display:flex;gap:8px;align-items:center">
                <input type="number" class="item-qty" min="1" value="10" style="width:90px;padding:8px;border-radius:8px;border:1px solid #e6e9ed">
                <button class="btn add-cart">Add to cart</button>
              </div>
            </div>
          </article>

        </div>
      </div>

      <!-- Contact / Quote form -->
      <aside>
        <div class="form-card" id="contact">
          <h3 data-i18n="form_title">Request a Quote</h3>
          <p class="muted" data-i18n="form_sub">Fill below and we will contact you on WhatsApp or call.</p>

         <form id="contactForm">

            <div class="row">
              <div class="col">
                <label for="name" data-i18n="label_name">Name*</label>
                <input id="name" name="name" type="text" required placeholder="Name">
              </div>
              <div class="col">
                <label for="business_name" data-i18n="label_business">Business name</label>
                <input id="business_name" name="business_name" type="text" placeholder="Business name (optional)">
              </div>
            </div>

            <div class="row">
              <div class="col">
                <label for="phone" data-i18n="label_phone">Phone*</label>
                <input id="phone" name="phone" type="tel" required placeholder="+91 98xxxx">
              </div>
              <div class="col">
                <label for="city" data-i18n="label_city">City</label>
                <input id="city" name="city" type="text" placeholder="City">
              </div>
            </div>

            <!-- Address field now small like the name box -->
            <div class="col address-row">
              <label for="address" data-i18n="label_address">Delivery Address*</label>
              <input id="address" name="address" type="text" required placeholder="Full address with landmark">
              <div style="margin-top:8px;font-size:13px;color:var(--muted)" data-i18n="address_tip">Tip: include district and nearest landmark.</div>
            </div>

            <div class="row">
              <div class="col">
                <label for="variety" data-i18n="label_variety">Variety</label>
                <select id="variety" name="variety">
                  <option value="Robusta">Robusta</option>
                  <option value="Yelakki">Yelakki</option>
                  <option value="Rasthali">Rasthali</option>
                  <option value="karpura">Karpura</option>
                  <option value="narendra">Narendra</option>
                </select>
              </div>
              <div class="col">
                <label for="quantity_kg" data-i18n="label_quantity">Quantity (kg)</label>
                <input id="quantity_kg" name="quantity_kg" type="text" placeholder="e.g. 500">
              </div>
            </div>

            <div class="col">
              <label for="message" data-i18n="label_message">Message</label>
              <textarea id="message" name="message" placeholder="Delivery date, packing, or other notes"></textarea>
            </div>

            <div style="margin:8px 0" class="muted">
              <label><input type="checkbox" id="consent" name="consent" value="1"> <span data-i18n="consent_text">I agree to be contacted about my inquiry.</span></label>
            </div>

            <div style="display:flex;gap:8px;align-items:center">
              <button type="submit" class="btn" id="sendInquiry">Send Inquiry</button>
              <button type="button" id="callBtn" class="btn secondary">Call / WhatsApp</button>
            </div>

            <p id="formMessage" class="muted" style="margin-top:10px"></p>
          </form>
        </div>

        <div style="margin-top:12px;text-align:center;font-size:13px" class="muted">
          <strong>Note:</strong> Minimum order 200 kg. For urgent orders call or WhatsApp.
        </div>
      </aside>
    </section>

    <!-- Why Choose Us -->
    <section style="margin-top:40px;text-align:center">
      <h3 data-i18n="why_title">Why Choose SDB Plantation?</h3>
      <p class="muted" data-i18n="why_sub">Trusted by 100+ wholesalers and retailers across Karnataka for quality and reliability.</p>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:16px">
        <div class="card"><div class="body"><strong>‚úÖ Farm Direct</strong><br>Bananas sourced directly from our own farms.</div></div>
        <div class="card"><div class="body"><strong>üöö Fast Delivery</strong><br>Next-day dispatch for most bulk orders.</div></div>
        <div class="card"><div class="body"><strong>üì¶ Consistent Supply</strong><br>We maintain regular stock all year round.</div></div>
      </div>
    </section>

    <!-- Gallery -->
    <h3 id="gallery" style="margin-top:28px" data-i18n="gallery_title">Gallery</h3>
    <div class="gallery"></div>

    <!-- Footer -->
    <footer>
      <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:20px;flex-wrap:wrap">
        <div style="max-width:320px">
          <strong>SDBPlantation</strong><br>
          <span class="muted">Wholesale banana suppliers ‚Äî Local & interstate deliveries</span>
          <p style="margin-top:10px;font-size:14px;line-height:1.5">
            <strong>Address:</strong><br>
            163 Sri navdurga temple mohan Raj layout sathnur,<br>
            village, jala hobli, srinivaspur,<br>
            Bengaluru, Karnataka<br>
            üìç <a href="https://maps.app.goo.gl/t5X7sJraMuibJ27PA?g_st=aw" target="_blank">View on Google Maps</a>
          </p>
        </div>
        <div style="font-size:14px">
          <p><strong>üìû Phone:</strong> <span id="phoneText">+91 8553334247</span></p>
          <p><strong>üìß Email:</strong> <a href="mailto:sdbplantation@gmail.com">sdbplantation@gmail.com</a></p>
          <p><strong>üì∏ Instagram:</strong> <a href="https://www.instagram.com/sdb_plantation" target="_blank">@sdb_plantation</a></p>
          <p><strong>üïí Working hours:</strong> 6 AM ‚Äì 8 PM (Mon‚ÄìSat)</p>
        </div>
        <div style="font-size:14px">
          <p><strong>Quick Links</strong></p>
          <p><a href="#products">Products</a></p>
          <p><a href="#gallery">Gallery</a></p>
          <p><a href="#contact">Contact</a></p>
        </div>
      </div>
      <div style="margin-top:20px;text-align:center;color:#9ca3af;font-size:13px;border-top:1px solid #f0f2f1;padding-top:10px">
        ¬© <span id="year"></span> SDB Plantation ¬∑ All rights reserved, prepared by - sangamesh nidode
      </div>
    </footer>

    <!-- Floating WhatsApp -->
    <a class="whatsapp" id="waLink" href="#" target="_blank" rel="noopener">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="wa"><span id="waText">Chat</span>
    </a>

    <!-- Cart Button & Drawer -->
    <button class="cart-btn" id="openCart">üß∫ Cart (<span id="cartCount">0</span>)</button>
    <div class="cart-drawer" id="cartDrawer">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>Your Cart</strong>
        <button id="closeCart" style="background:transparent;border:none;font-weight:700;cursor:pointer">‚úï</button>
      </div>
      <div id="cartItems"></div>
      <div id="cartFooter" style="display:none;padding-top:8px;border-top:1px solid #f1f5f4;margin-top:8px">
        <div style="display:flex;justify-content:space-between;align-items:center"><div class="small">Subtotal</div><div id="cartTotal" style="font-weight:800">‚Çπ0</div></div>
        <div style="margin-top:10px;display:flex;gap:8px">
          <button id="checkoutBtn" class="btn">Checkout</button>
          <button id="clearCart" class="btn secondary">Clear</button>
        </div>
      </div>
      <div id="cartEmptyMsg" class="cart-empty">Your cart is empty</div>
    </div>

    <!-- Scroll to Top -->
    <button id="topBtn" style="display:none;position:fixed;bottom:80px;right:16px;background:#2f9e44;color:#fff;padding:10px;border:none;border-radius:999px;cursor:pointer;font-size:18px">‚Üë</button>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', ()=>{
    // --- i18n small translations (kn) ---
    const translations = {
      kn: {
        brand_name: '‡≤é‡≤∏‡≥ç.‡≤°‡≤ø.‡≤¨‡≤ø ‡≤™‡≥ç‡≤≤‡≤æ‡≤Ç‡≤ü‡≥á‡≤∂‡≤®‡≥ç',
        brand_tag: '‡≤π‡≥ã‡≤≤‡≥ç‡≤∏‡≥á‡≤≤‡≥ç ‡≤¨‡≤®‡≤æ‡≤®‡≤æ‡≤∏‡≥ç',
        nav_products: '‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®‡≤ó‡≤≥‡≥Å',
        nav_gallery: '‡≤ó‡≥ç‡≤Ø‡≤æ‡≤≤‡≤∞‡≤ø',
        nav_contact: '‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï',
        hero_sub: '‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç ‚Üí ‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü ¬∑ ‡≤§‡≤æ‡≤ú‡≤æ ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤¶‡≤ø‡≤®',
        hero_h1: '‡≤§‡≤æ‡≤ú‡≤æ ‡≤¨‡≤®‡≤æ‡≤®‡≤æ ‚Äî ‡≤µ‡≤ø‡≤∂‡≥ç‡≤µ‡≤æ‡≤∏‡≤æ‡≤∞‡≥ç‡≤π‡≤µ‡≤æ‡≤ó‡≤ø ‡≤µ‡≤ø‡≤§‡≤∞‡≤£‡≥Ü',
        hero_p: 'SDB ‡≤™‡≥ç‡≤≤‡≤æ‡≤Ç‡≤ü‡≥á‡≤∂‡≤®‡≥ç ‡≤â‡≤§‡≥ç‡≤§‡≤Æ ‡≤ó‡≥Å‡≤£‡≤Æ‡≤ü‡≥ç‡≤ü‡≤¶ ‡≤¨‡≤®‡≤æ‡≤®‡≤æ ‡≤™‡≥Ç‡≤∞‡≥à‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.',
        prod_robusta: '‡≤∞‡≥ä‡≤¨‡≥Å‡≤∏‡≥ç‡≤ü‡≤æ',
        prod_yelakki: '‡≤Ø‡≥Ü‡≤≤‡≥ç‡≤≤‡≤ï‡≥ç‡≤ï‡≤ø',
        prod_red: '‡≤∞‡≥Ü‡≤°‡≥ç ‡≤¨‡≤®‡≤æ‡≤®‡≤æ',
        prod_karpura: '‡≤ï‡≤æ‡≤∞‡≥ç‡≤™‡≥Å‡≤∞',
        prod_narendra: '‡≤®‡≤∞‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞',
        form_title: '‡≤â‡≤≤‡≥ç‡≤≤‡≥á‡≤ñ‡≤ï‡≥ç‡≤ï‡≤æ‡≤ó‡≤ø ‡≤µ‡≤ø‡≤®‡≤Ç‡≤§‡≤ø',
        form_sub: '‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç ‡≤≠‡≤∞‡≥ç‡≤§‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø ‚Äî ‡≤®‡≤æ‡≤µ‡≥Å ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≥á‡≤µ‡≥Ü.',
        label_name: '‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å*',
        label_business: '‡≤µ‡≥ç‡≤Ø‡≤æ‡≤™‡≤æ‡≤∞‡≤¶ ‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å',
        label_phone: '‡≤´‡≥ã‡≤®‡≥ç*',
        label_city: '‡≤®‡≤ó‡≤∞',
        label_address: '‡≤µ‡≤ø‡≤≥‡≤æ‡≤∏*',
        address_tip: '‡≤ü‡≤ø‡≤™‡≥ç: ‡≤ú‡≤ø‡≤≤‡≥ç‡≤≤‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤π‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤¶ ‡≤≤‡≥ç‡≤Ø‡≤æ‡≤Ç‡≤°‡≥ç‚Äç‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ï‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø.',
        label_variety: '‡≤¨‡≤≥‡≤µ‡≤°‡≥Ü',
        label_quantity: '‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£ (‡≤ï‡≥Ü‡≤ú‡≤ø)',
        label_message: '‡≤∏‡≤Ç‡≤¶‡≥á‡≤∂',
        consent_text: '‡≤®‡≤®‡≥ç‡≤® ‡≤µ‡≤ø‡≤ö‡≤æ‡≤∞‡≤£‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.',
        why_title: '‡≤è‡≤ï‡≥Ü SDB?',
        why_sub: '100+ ‡≤µ‡≤ø‡≤§‡≤∞‡≤£‡≤æ ‡≤ó‡≥ç‡≤∞‡≤æ‡≤π‡≤ï‡≤∞‡≥Å ‡≤®‡≤Æ‡≥ç‡≤Æ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Ç‡≤¨‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤∞‡≥Ü.',
        gallery_title: '‡≤ó‡≥ç‡≤Ø‡≤æ‡≤≤‡≤∞‡≤ø',
        wa_chat: '‡≤ö‡≤æ‡≤ü‡≥ç'
      }
    };

    function setLang(lang){
      document.documentElement.lang = lang === 'kn' ? 'kn' : 'en';
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(lang === 'kn' && translations.kn[key]) el.textContent = translations.kn[key];
        else el.textContent = el.getAttribute('data-i18n-default') || el.textContent;
      });
      document.getElementById('waText').textContent = lang==='kn' ? translations.kn.wa_chat : 'Chat';
    }
    // save defaults
    document.querySelectorAll('[data-i18n]').forEach(el=>{
      if(!el.getAttribute('data-i18n-default')) el.setAttribute('data-i18n-default', el.textContent.trim());
    });
    document.getElementById('btn-kn').addEventListener('click', ()=> setLang('kn'));
    document.getElementById('btn-en').addEventListener('click', ()=> setLang('en'));

    // --- helpers & cart ---
    const rupee = (n)=> '‚Çπ' + Number(n).toLocaleString('en-IN', {maximumFractionDigits:2});
    const CART_KEY = 'sdb_cart_v1';
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || '{}');
    const BACKEND_BASE = 'http://localhost:4000'; // change if your server runs elsewhere

    function saveCartLocal(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); renderCart(); }

    async function saveDraftToBackend(){
      // save a lightweight draft (so admin sees cart quickly)
      try{
        const payload = { items: Object.values(cart), createdAt:new Date().toISOString() };
        await fetch(BACKEND_BASE + '/api/orders/draft', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        // no need to await response data
      }catch(err){
        console.warn('draft save failed', err);
      }
    }

    function addToCart(id, name, price, qty, img){
      qty = Number(qty);
      if(!qty || qty <= 0) return;
      if(!cart[id]) cart[id] = {id,name,price:Number(price),qty, img};
      else cart[id].qty += qty;
      saveCartLocal();
      // autosave draft to backend (non-blocking)
      saveDraftToBackend();
    }

    function removeFromCart(id){ delete cart[id]; saveCartLocal(); saveDraftToBackend(); }
    function updateQty(id, qty){ if(cart[id]){ cart[id].qty = Number(qty); if(cart[id].qty<=0) removeFromCart(id); saveCartLocal(); saveDraftToBackend(); }}

    function renderCart(){
      const items = Object.values(cart);
      const cartItems = document.getElementById('cartItems');
      const cartCount = document.getElementById('cartCount');
      const cartFooter = document.getElementById('cartFooter');
      const cartEmptyMsg = document.getElementById('cartEmptyMsg');
      cartItems.innerHTML = '';
      if(items.length===0){ cartEmptyMsg.style.display='block'; cartFooter.style.display='none'; cartCount.textContent = 0; document.getElementById('cartTotal').textContent = rupee(0); return; }
      cartEmptyMsg.style.display='none'; cartFooter.style.display='block';
      let total = 0;
      items.forEach(it=>{
        const row = document.createElement('div'); row.className='cart-item';
        row.innerHTML = `
          <img src="${it.img||'logo.jpg'}" alt="${it.name}">
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <strong style="font-size:14px">${it.name}</strong>
              <div style="font-weight:800">${rupee(it.price*it.qty)}</div>
            </div>
            <div class="small">${rupee(it.price)} / kg</div>
            <div style="margin-top:6px;display:flex;justify-content:space-between;align-items:center">
              <div class="qty-controls">
                <button data-action="dec" data-id="${it.id}" style="padding:6px;border-radius:6px;border:1px solid #e6e9ed;background:transparent">-</button>
                <input data-id="${it.id}" type="number" value="${it.qty}" min="1" style="width:64px;padding:6px;border-radius:8px;border:1px solid #e6e9ed;margin:0 6px">
                <button data-action="inc" data-id="${it.id}" style="padding:6px;border-radius:6px;border:1px solid #e6e9ed;background:transparent">+</button>
              </div>
              <button data-remove="${it.id}" style="background:transparent;border:none;color:#ef4444;cursor:pointer">Remove</button>
            </div>
          </div>
        `;
        cartItems.appendChild(row);
        total += it.price * it.qty;
      });
      document.getElementById('cartTotal').textContent = rupee(total);
      cartCount.textContent = items.reduce((s,i)=>s+i.qty,0);
    }

    // delegate add-to-cart
    document.getElementById('products').addEventListener('click', (e)=>{
      const btn = e.target.closest('.add-cart');
      if(!btn) return;
      const card = btn.closest('.card');
      const id = card.dataset.id;
      const name = card.dataset.name;
      const price = card.dataset.price;
      const img = card.querySelector('img')?.src || '';
      const qtyEl = card.querySelector('.item-qty');
      const qty = qtyEl ? Number(qtyEl.value) : 1;
      addToCart(id,name,price, qty, img);
    });

    // cart drawer
    const openCartBtn = document.getElementById('openCart');
    const cartDrawer = document.getElementById('cartDrawer');
    document.getElementById('closeCart').addEventListener('click', ()=>cartDrawer.style.display='none');
    openCartBtn.addEventListener('click', ()=> cartDrawer.style.display = cartDrawer.style.display==='flex' ? 'none':'flex');

    // cart quantity / remove actions
    document.getElementById('cartItems').addEventListener('click', (e)=>{
      if(e.target.dataset.remove){ removeFromCart(e.target.dataset.remove); return; }
      if(e.target.dataset.action==='inc'){ const id = e.target.dataset.id; updateQty(id, cart[id].qty+1); return; }
      if(e.target.dataset.action==='dec'){ const id = e.target.dataset.id; updateQty(id, cart[id].qty-1); return; }
    });
    document.getElementById('cartItems').addEventListener('input', (e)=>{
      if(e.target.tagName==='INPUT' && e.target.type==='number'){
        const id = e.target.dataset.id; updateQty(id, Number(e.target.value));
      }
    });
    document.getElementById('clearCart').addEventListener('click', ()=>{ cart = {}; saveCartLocal(); });

    // --- submit final order to backend ---
    async function submitFinalOrder(customerInfo){
      // build order
      const items = Object.values(cart);
      if(items.length===0) throw new Error('Cart empty');
      const payload = {
        customer: customerInfo,
        items,
        subtotal: items.reduce((s,i)=>s + i.price*i.qty,0),
        createdAt: new Date().toISOString()
      };
      const res = await fetch(BACKEND_BASE + '/api/orders', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if(!res.ok) throw new Error('server error');
      const data = await res.json();
      return data; // expected { orderId: '...' }
    }

    document.getElementById('checkoutBtn').addEventListener('click', async ()=>{
      try{
        // gather customer info (if provided)
        const customer = {
          name: document.getElementById('name').value.trim() || 'Anonymous',
          phone: document.getElementById('phone').value.trim() || document.getElementById('phoneText').textContent.trim(),
          address: document.getElementById('address').value.trim() || '',
        };
        // simple validation
        if(!customer.phone){ alert('Please provide phone'); return; }
        const result = await submitFinalOrder(customer);
        // on success open whatsapp with order id & summary
        const items = Object.values(cart);
        let msg = `Order confirmed (id: ${result.orderId})%0A`;
        items.forEach(i=> msg += `${i.name} - ${i.qty} kg - ${encodeURIComponent('‚Çπ')}${i.price*i.qty}%0A`);
        msg += `%0ASubtotal: ${document.getElementById('cartTotal').textContent}`;
        const phone = customer.phone.replace(/[^0-9]/g,'');
        // clear cart after placing
        cart = {}; saveCartLocal();
        // open whatsapp
        const wa = `https://wa.me/${phone}?text=${msg}`;
        window.open(wa, '_blank');
        alert('Order placed successfully. Order ID: ' + result.orderId);
      }catch(err){
        console.error(err);
        alert('Failed to place order: ' + (err.message || 'server error'));
      }
    });

    // call / whatsapp button: open chat with admin + include cart summary
    document.getElementById('callBtn').addEventListener('click', ()=>{
      const adminPhone = document.getElementById('phoneText').textContent.replace(/[^0-9]/g,'') || '918553334247';
      const items = Object.values(cart);
      let msg = items.length ? 'Order inquiry from website%0A' : '';
      items.forEach(i=> msg += `${i.name} - ${i.qty} kg - ${encodeURIComponent('‚Çπ')}${i.price*i.qty}%0A`);
      const wa = `https://wa.me/${adminPhone}?text=${msg}`;
      window.open(wa, '_blank');
    });

    // set WA floating link
    document.getElementById('waLink').href = 'https://wa.me/918553334247';

    // restore & render
    renderCart();
    document.getElementById('year').textContent = new Date().getFullYear();

    // keep cart in sync across tabs
    window.addEventListener('storage', ()=>{ cart = JSON.parse(localStorage.getItem(CART_KEY) || '{}'); renderCart(); });
  });
  </script>
</body>
</html>
