c<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SDB Plantation ‚Äî Wholesale Bananas</title>
  <meta name="description" content="SDB Plantation ‚Äî Farm fresh wholesale bananas. Contact for bulk orders, pricing and delivery." />
  <link rel="icon" href="/assets/favicon.ico" />
  <style>
    .card.sdb-small-stack { grid-template-columns: 1fr !important; }
.card.sdb-small-stack .controls { grid-column:1/-1; display:flex; justify-content:space-between; }

    /* ===== Header / top-nav mobile fix ===== */
header { gap:10px; padding:10px 12px; align-items:center; }
.brand { display:flex; gap:10px; align-items:center; min-width:0; flex:0 1 auto; }
.brand div { min-width:0; overflow:hidden; }
.brand h1 { font-size:16px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin:0; }
.brand .small { display:block; font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* keep nav on one line, allow horizontal scroll if needed (no wrap) */
.nav { display:flex; gap:8px; align-items:center; flex:0 0 auto; white-space:nowrap; overflow:auto; -webkit-overflow-scrolling:touch; padding-bottom:2px; }

/* compact cart button so it doesn't take so much width */
#openCart { padding:6px 10px !important; font-size:13px !important; min-width:56px; }

/* hide repeated 'Cart' link text on very small screens to save space (keeps cart button) */
@media (max-width:420px) {
  .nav a[href="/cart.html"] { display:none; }
  .nav a[href="#products"] { padding:4px 6px; font-size:13px; }
  header { padding-left:10px; padding-right:10px; }
}

/* small visual guard: ensure header items never overlap */
header, .nav, .brand { position:relative; z-index:15; }

    /* ===============================
   ‚≠ê MOBILE HEADER & CART FIX
   =============================== */

header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 0;
}

.nav {
  display:flex;
  gap:10px;
  align-items:center;
}

#openCart {
  padding:8px 12px !important;
  font-size:15px !important;
  border-radius:8px !important;
}

@media (max-width:480px) {
  /* Smaller mobile header */
  header {
    flex-direction:row;
    justify-content:space-between;
    align-items:center;
  }

  .brand h1 {
    font-size:17px;
  }

  #openCart {
    font-size:14px !important;
    padding:6px 10px !important;
  }
}

/* ===============================
   ‚≠ê PRODUCT CARD CLICK EFFECT
   =============================== */

.card {
  transition:transform 0.15s ease, box-shadow 0.2s ease !important;
  cursor:pointer;
}

.card:active {
  transform:scale(0.96);
  box-shadow:0 4px 14px rgba(0,0,0,0.18);
}

.add-btn {
  transition:background 0.2s ease, transform 0.15s ease;
}

.add-btn:active {
  transform:scale(0.92);
}

/* ===============================
   ‚≠ê IMPROVE PRODUCT HEADER (Products / Cart)
   =============================== */

.nav a {
  font-size:14px;
  padding:6px 10px;
  color:#2f9e44;
  font-weight:600;
}

.nav a:hover {
  background:#e9f7ec;
  border-radius:6px;
}

/* Fix overflow on mobile */
@media (max-width:480px) {
  .nav {
    gap:6px;
  }

  .nav a {
    font-size:13px;
    padding:5px 8px;
  }
}

/* ===============================
   ‚≠ê FIX ‚ÄúCart (0)‚Äù UI ON VERY SMALL SCREENS
   =============================== */

@media (max-width:380px) {
  #openCart {
    font-size:13px !important;
    padding:5px 8px !important;
  }
}
.card:active {
  transform:scale(0.95);
  background:#f4fff4;
}


    /* === MOBILE-FIRST UI IMPROVEMENTS (paste at top of existing <style>) === */
:root{
  --brand:#2f9e44;
  --fg:#0f1724;
  --muted:#6b7280;
  --card:#ffffff;
  --card-shadow: 0 10px 30px rgba(15,23,36,0.06);
  --radius:12px;
  --tap:12px;        /* button vertical padding */
  --gap:12px;
  --max-width:1100px;
  --text-base:16px;
  --small:13px;
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
}

/* reset / mobile-friendly defaults */
html,body{height:100%;margin:0;padding:0;background:#fff;color:var(--fg);-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}
.wrap{max-width:var(--max-width);margin:0 auto;padding:14px}

/* buttons & tappables */
.btn, button, .cart-fab, a.btn {
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px; padding:calc(var(--tap) + 2px) 14px; border-radius:var(--radius);
  font-size:var(--text-base); line-height:1; min-height:44px; cursor:pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0.08);
}
.btn { background:var(--brand); color:#fff; border:none; box-shadow:0 6px 18px rgba(47,158,68,0.12) }
.btn.secondary{ background:transparent; color:var(--brand); border:1px solid rgba(47,158,68,0.12) }

/* cards */
.card{background:var(--card); border-radius:var(--radius); box-shadow:var(--card-shadow); overflow:hidden; border:1px solid rgba(0,0,0,0.04)}
.card img{width:100%;height:auto;display:block;object-fit:cover}

/* grids (mobile-first) */
.cards{display:grid;grid-template-columns:1fr;gap:var(--gap);margin-top:14px}
.kpis{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.kpi{flex:1;min-width:120px;padding:10px;border-radius:10px;background:#f6f9f5;text-align:center}

/* typography */
h1,h2,h3{margin:6px 0 8px;font-weight:700}
p, .small{font-size:var(--small);color:var(--muted);margin:0}

/* header */
header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:6px 0}
.brand img{width:52px;height:52px;border-radius:10px;object-fit:cover}
.brand h1{font-size:18px;margin:0}

/* layout adjustments on small screens */
@media (min-width:640px){
  .cards{grid-template-columns:repeat(2,1fr)}
  .hero{grid-template-columns:1fr 360px;gap:20px}
}
@media (min-width:1000px){
  .cards{grid-template-columns:repeat(3,1fr)}
  .wrap{padding:22px}
}

/* cart fab styling (mobile friendly) */
.cart-fab{position:fixed;right:14px;bottom:14px;z-index:200;padding:12px 14px;border-radius:999px;box-shadow:0 12px 36px rgba(0,0,0,0.16)}

/* inputs */
.input, input[type="text"], input[type="tel"], textarea, .qty {
  width:100%; padding:10px; border-radius:10px; border:1px solid #e6e9ed; font-size:var(--text-base);
  box-sizing:border-box;
}

/* Make sure long text wraps and no horizontal scroll */
*{word-break:break-word}

/* small tweaks for cart page totals/buttons */
.totals{margin-top:12px;padding-top:12px;border-top:1px dashed #eee}

    :root{
      --green:#2f9e44; --fg:#0f1724; --muted:#6b7280;
      --card-bg:#fff; --card-shadow: 0 8px 24px rgba(15,23,36,0.06);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:#fff;color:var(--fg)}
    .wrap{max-width:1100px;margin:20px auto;padding:0 16px}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center}
    .brand img{width:64px;height:64px;border-radius:8px;object-fit:cover}
    .nav{display:flex;gap:12px;align-items:center}
    .btn{background:var(--green);color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:18px}
    .card{background:var(--card-bg);border-radius:12px;box-shadow:var(--card-shadow);overflow:hidden;border:1px solid rgba(0,0,0,0.04)}
    .card img{width:100%;height:160px;object-fit:cover}
    .card .body{padding:14px}
    .price{color:var(--green);font-weight:800}
    .small{font-size:13px;color:var(--muted)}
    .cart-fab{position:fixed;right:18px;bottom:18px;z-index:200;background:var(--green);color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 12px 36px rgba(0,0,0,0.2);cursor:pointer}
    footer{margin-top:40px;padding:20px 0;color:var(--muted);border-top:1px solid #f0f2f1}
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:20px}
    .info-card{background:#f8fff7;border-radius:12px;padding:14px;border:1px solid #e9f3ea}
    .badge{display:inline-block;background:var(--green);color:#fff;padding:6px 10px;border-radius:999px;font-weight:800}
    .footer-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
    a.footer-link{color:var(--muted);text-decoration:none}
    .muted{color:var(--muted)}
    @media (max-width:900px){ .cards{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))} .brand img{width:54px;height:54px} .footer-grid{grid-template-columns:1fr} }
    /* ==== Creative hover + entrance animation (paste at end of <style>) ==== */
/* Palette tweaks */
:root{
  --accent-grad: linear-gradient(135deg,#f7d94c22, #2f9e44 25%, #7be49522 100%);
  --card-glow: 0 12px 30px rgba(47,158,68,0.12);
  --card-glow-hover: 0 20px 50px rgba(47,158,68,0.18);
}

/* Entrance animation */
@keyframes sdb-fade-up {
  from { opacity: 0; transform: translateY(18px) scale(.995); filter: blur(4px); }
  60% { opacity: .9; transform: translateY(-6px) scale(1.01); filter: blur(0); }
  to { opacity: 1; transform: translateY(0) scale(1); filter: none; }
}

.card.sdb-animate {
  opacity: 0;
  transform: translateY(18px) scale(.995);
  will-change: transform, opacity, filter;
}

/* when animation class is applied the animation will play */
.card.sdb-in {
  animation: sdb-fade-up .45s cubic-bezier(.2,.9,.28,1) forwards;
  box-shadow: var(--card-glow);
}

/* Stagger helper: JS will set inline animationDelay on each .card */

/* Hover/pointer effects (desktop) */
.card {
  transition: transform .18s cubic-bezier(.2,.9,.3,1), box-shadow .18s ease, background .18s ease;
  border-radius: 14px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

/* subtle background accent strip top-right */
.card::after{
  content:'';
  position:absolute; right:10px; top:10px; width:36px; height:36px; border-radius:8px;
  background: rgba(255,255,255,0.06); pointer-events:none; mix-blend-mode:normal;
  transition: transform .18s ease, opacity .18s ease;
  transform: translateY(0);
}

/* pointer hover - desktop */
@media (hover: hover) and (pointer: fine) {
  .card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--card-glow-hover);
    background: linear-gradient(180deg, rgba(244,255,244,0.6), rgba(255,255,255,0));
  }
  .card:hover::after {
    transform: translateY(-4px) scale(1.06);
    opacity: 0.95;
  }
  .card img {
    transform-origin: center;
    transition: transform .25s cubic-bezier(.2,.9,.28,1);
  }
  .card:hover img {
    transform: scale(1.03) translateY(-4px);
  }
}

/* active / tap state for touch */
.card:active, .card.sdb-tap {
  transform: scale(.98) translateY(2px);
  box-shadow: 0 8px 22px rgba(0,0,0,0.12);
}

/* Add a subtle label with price when hovered (desktop) */
.card .price {
  position: relative;
  z-index: 4;
  transition: transform .12s ease, color .12s ease;
}

/* Micro animation for add button */
.add-btn {
  transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
}
.add-btn:active { transform: scale(.94); opacity:.95; }

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce) {
  .card.sdb-in, .card { animation: none !important; transition: none !important; transform: none !important; }
}

  </style>
</head>
<body>
  <!-- Mobile / PWA friendly meta (paste into <head>) -->
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="theme-color" content="#2f9e44">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <div class="wrap">
    <header>
      <a class="brand" href="/">
        <img src="logo.jpg" alt="SDB Plantation logo">
        <div>
          <h1 style="margin:0">SDB Plantation</h1>
          <div class="small">Wholesale Banana Supplier ‚Äî Bengaluru</div>
        </div>
      </a>

    <div class="nav">
  <a href="#products">Products</a>
  <a href="/cart.html">Cart</a>
  <button id="openCart" class="btn">Cart (<span id="cartCount">0</span>)</button>
</div>

    </header>

    <!-- Hero -->
    <section>
      <div class="small">Farm ‚Üí Market ¬∑ Fresh daily</div>
      <h2 style="margin:6px 0">Fresh wholesale bananas ‚Äî delivered reliably</h2>
      <p class="small">Minimum order 100 kg. Add items to cart, then review and place order on the cart page.</p>

      <!-- Key info (fast delivery etc.) -->
      <div class="info-grid" aria-hidden="false">
        <div class="info-card">
          <div class="badge">FAST</div>
          <h4 style="margin:8px 0 4px">Fast Delivery</h4>
          <p class="small">Same-day dispatch for local orders, next-day pan-state delivery. Priority slots for regular buyers.</p>
        </div>
        <div class="info-card">
          <div class="badge">FRESH</div>
          <h4 style="margin:8px 0 4px">Freshness Guarantee</h4>
          <p class="small">Harvested and packed within hours. We guarantee farm-fresh quality or replacement.</p>
        </div>
        <div class="info-card">
          <div class="badge">SAFE</div>
          <h4 style="margin:8px 0 4px">Hygienic Packing & Transport</h4>
          <p class="small">Food-grade packaging, cold-chain options for long trips, and trained transport partners.</p>
        </div>
        <div class="info-card">
          <div class="badge">CERT</div>
          <h4 style="margin:8px 0 4px">Certified & Trusted</h4>
          <p class="small">FSSAI/Agmark compliant farms and regular quality audits. Serving 100+ wholesalers across Karnataka.</p>
        </div>
      </div>

      <!-- How it works -->
      <div style="margin-top:18px;padding:12px;border-radius:10px;border:1px dashed #e6f4ea">
        <strong>How ordering works</strong>
        <ol class="small">
          <li>Add a variety to cart (default 100 kg). Quantities can be changed on the cart page.</li>
          <li>Enter your Name, Phone & Delivery Address on the cart page.</li>
          <li>Click Checkout to save the order and open WhatsApp confirmation.</li>
        </ol>
      </div>

      <!-- Products -->
      <h3 id="products" style="margin-top:20px">Products</h3>
      <div id="productsGrid" class="cards">
        <!-- Product cards (images & prices unchanged) -->
        <div class="card" data-sku="Robusta" data-name="Robusta" data-price="25">
          <img src="robust.jpeg" alt="Robusta bananas">
          <div class="body">
            <h3>Robusta</h3>
            <p class="small">Reliable, widely used ‚Äî good shelf life.</p>
            <div class="price">‚Çπ25 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

        <div class="card" data-sku="Yelakki" data-name="Yelakki" data-price="50">
          <img src="organik-yellaki-banana-500x500.webp" alt="Yelakki bananas">
          <div class="body">
            <h3>Yelakki</h3>
            <p class="small">Sweet and preferred for retail.</p>
            <div class="price">‚Çπ50 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

        <div class="card" data-sku="greenbanana" data-name="green banana" data-price="50">
          <img src="green.banana.jpg" alt="green banana">
          <div class="body">
            <h3>green banana</h3>
            <p class="small">Bulk grade for processors & wholesalers.</p>
            <div class="price">‚Çπ50 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

        <div class="card" data-sku="Red" data-name="Red banana" data-price="50">
          <img src="red bananas.webp" alt="Red bananas">
          <div class="body">
            <h3>Red banana</h3>
            <p class="small">Premium variety with great taste & color.</p>
            <div class="price">‚Çπ50 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

        <div class="card" data-sku="Karpura" data-name="Karpura" data-price="50">
          <img src="karpura.jpeg" alt="Karpura bananas">
          <div class="body">
            <h3>Karpura</h3>
            <p class="small">Fragrant variety, specialty grade.</p>
            <div class="price">‚Çπ50 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

        <div class="card" data-sku="Nendra" data-name="Nendra" data-price="33">
          <img src="nendra.jpeg" alt="Nendra banana">
          <div class="body">
            <h3>Nendra</h3>
            <p class="small">Great for processing & stable supply.</p>
            <div class="price">‚Çπ33 / kg</div>
            <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
              <button class="btn add-btn">Add to cart</button>
              <div class="small">In cart: <span class="in-cart">0</span> kg</div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <footer>
      <div class="footer-grid">
        <div>
          <strong>SDB Plantation</strong><br>
          <div class="small">Wholesale banana supplier ‚Äì Local and interstate deliveries</div>
          <p style="margin-top:10px;font-size:14px;line-height:1.5">
            <strong>Address:</strong><br>
            SDB Plantation,<br>
            near 163 Sri navdurga temple mohan Raj layout sathnur village<br>
            jala hobli, srinivaspur, Sathanur, Bengaluru, Karnataka<br>
            üìç <a class="footer-link" href="https://maps.app.goo.gl/t5X7sJraMuibJ27PA?g_st=aw" target="_blank">View on Google Maps</a>
          </p>
          <p style="margin-top:6px" class="small">
            üïí Working hours: 6 AM ‚Äì 8 PM (Mon‚ÄìSat)
          </p>
        </div>

        <div>
          <p style="font-size:15px">
            <strong>Contact</strong><br>
            üìû Phone: <a class="footer-link" href="tel:+918553334247">+91 85533 34247</a><br>
            üìß Email: <a class="footer-link" href="mailto:sdbananaplantains@gmail.com">sdbananaplantains@gmail.com</a><br>
            üì∏ Instagram: <a class="footer-link" href="https://www.instagram.com/sdb_plantation?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank">@sdb_plantation</a><br>
            üí¨ WhatsApp: <a class="footer-link" href="https://wa.me/918553334247" target="_blank">Chat on WhatsApp</a>
          </p>
          <p class="small">
            Quick Links:<br>
            <a class="footer-link" href="#products">Products</a> ¬∑ <a class="footer-link" href="/cart.html">Cart</a> ¬∑ <a class="footer-link" href="#contact">Contact</a>
          </p>
        </div>
      </div>

      <div style="margin-top:20px;text-align:center;color:#9ca3af;font-size:13px;border-top:1px solid #f0f2f1;padding-top:10px">
        ¬© <span id="year"></span> SDB Plantation ¬∑ Fast dispatch & reliable supply
      </div>
    </footer>

    <button id="cartFab" class="cart-fab">Cart (<span id="cartFabCount">0</span>)</button>
  </div>

<!-- ---- PASTE THIS EXACT BLOCK JUST BEFORE </body> ---- -->
<script>
/* INLINE FORCE-FIX ‚Äî paste this near the end of index.html, before </body>.
   It WILL bind .add-btn buttons, update counts, persist cart, and NOT redirect.
   Remove this later once everything is confirmed working.
*/

/* Small mobile UX: ensure elements are scrolled into view when input focused */
(function(){
  document.addEventListener('focusin', (e) => {
    const el = e.target;
    if (el && (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA')) {
      setTimeout(()=> {
        try { el.scrollIntoView({behavior:'smooth', block:'center'}); } catch(e){}
      }, 300);
    }
  });
})();


(function(){
  try {
    if (window.__SDB_INLINE_DONE) return;
    window.__SDB_INLINE_DONE = true;
    console.log('[INLINE-FIX] binding add buttons');

    const KEY = 'sdb_cart_v3';
    const DEFAULT_KG = 100;

    function safeParse(v){ try { return JSON.parse(v || '{}'); } catch(e){ console.error('[INLINE-FIX] parse', e); return {}; } }
    function loadCart(){ return safeParse(localStorage.getItem(KEY)); }
    function saveCart(obj){ try { localStorage.setItem(KEY, JSON.stringify(obj)); updateUI(); } catch(e){ console.error('[INLINE-FIX] save', e); } }

    function updateUI(){
      const cart = loadCart();
      const count = Object.keys(cart).length;
      const elHead = document.getElementById('cartCount'); if (elHead) elHead.textContent = count;
      const elFab = document.getElementById('cartFabCount'); if (elFab) elFab.textContent = count;
      document.querySelectorAll('.card').forEach(card=>{
        try {
          const s = card.dataset.sku;
          const el = card.querySelector('.in-cart');
          if (el) el.textContent = cart[s] ? cart[s].qtyKg : 0;
        } catch(e){}
      });
    }

    function makeToast(msg){
      let t = document.getElementById('__sdb_toast');
      if (!t) {
        t = document.createElement('div');
        t.id = '__sdb_toast';
        Object.assign(t.style, {
          position:'fixed', right:'18px', bottom:'86px',
          background:'#2f9e44', color:'#fff', padding:'10px 14px',
          borderRadius:'10px', zIndex:999999, fontWeight:700, fontFamily:'Inter, system-ui, sans-serif'
        });
        document.body.appendChild(t);
      }
      t.textContent = msg;
      t.style.opacity = '1';
      clearTimeout(t._t);
      t._t = setTimeout(()=> { try { t.style.transition='opacity .25s'; t.style.opacity='0'; } catch(e){} }, 1200);
    }

    function addItemFromCard(card){
      if (!card) return console.error('[INLINE-FIX] addItem: no card');
      const sku = card.dataset.sku || ('sku_' + Math.random().toString(36).slice(2,6));
      const name = card.dataset.name || (card.querySelector('h3')?.innerText || sku);
      const price = Number(card.dataset.price) || 0;
      const img = card.querySelector('img')?.getAttribute('src') || '';

      const cart = loadCart();
      if (cart[sku]) cart[sku].qtyKg = Number(cart[sku].qtyKg) + DEFAULT_KG;
      else cart[sku] = { sku, name, qtyKg: DEFAULT_KG, price, img };

      saveCart(cart);
      makeToast('Added ' + DEFAULT_KG + ' kg ‚Äî ' + name);

      const btn = card.querySelector('.add-btn');
      if (btn) {
        const prev = btn.innerHTML;
        btn.innerHTML = 'Added ‚úì';
        btn.disabled = true;
        setTimeout(()=> { try { btn.innerHTML = prev; btn.disabled = false; } catch(e){} }, 600);
      }
      console.log('[INLINE-FIX] added', sku, DEFAULT_KG);
    }

    // Bind all existing .add-btn (direct)
    document.querySelectorAll('.add-btn').forEach(btn => {
      try {
        // remove old handler if present
        if (btn.__sdbHandler) btn.removeEventListener('click', btn.__sdbHandler);
      } catch(e){}
      const handler = function(ev){
        ev.preventDefault();
        const card = btn.closest('.card');
        addItemFromCard(card);
      };
      btn.__sdbHandler = handler;
      btn.addEventListener('click', handler);
      // visual debug highlight (optional)
      btn.style.boxShadow = '0 6px 14px rgba(47,158,68,0.12)';
    });

    // Also delegate cart open actions in header/fab
    const openCart = document.getElementById('openCart');
    if (openCart && !openCart.__sdbBound) {
      openCart.addEventListener('click', (e)=>{ e.preventDefault(); window.location.href='/cart.html'; });
      openCart.__sdbBound = true;
    }
    const fab = document.getElementById('cartFab');
    if (fab && !fab.__sdbBound) {
      fab.addEventListener('click', (e)=>{ e.preventDefault(); window.location.href='/cart.html'; });
      fab.__sdbBound = true;
    }

    // initial UI sync
    updateUI();

    console.log('[INLINE-FIX] OK ‚Äî Add buttons bound. Click Add to test (no redirect).');
  } catch (err) {
    console.error('[INLINE-FIX] unexpected error', err);
  }
})();
/* SDB: staggered entrance + touch tap class */
(function(){
  try {
    const cards = Array.from(document.querySelectorAll('.card'));
    if (!cards.length) return;

    // Only animate once
    if (!window.__sdbEntranceDone) {
      // add initial class
      cards.forEach((c, i) => {
        c.classList.add('sdb-animate');
        // stagger delay (smaller screens = slightly faster)
        const base = (window.innerWidth < 640) ? 70 : 90;
        c.style.animationDelay = (i * base) + 'ms';
        // add final trigger after small timeout so CSS picks up animationDelay
        setTimeout(()=> c.classList.add('sdb-in'), 40);
      });
      window.__sdbEntranceDone = true;
    } else {
      // if already done, ensure they are visible
      cards.forEach(c => c.classList.add('sdb-in'));
    }

    // Touch friendly: add quick tap class on touchstart to mirror :active
    let lastTouch = 0;
    cards.forEach(c => {
      c.addEventListener('touchstart', (e) => {
        lastTouch = Date.now();
        c.classList.add('sdb-tap');
      }, {passive:true});
      c.addEventListener('touchend', (e) => {
        setTimeout(()=> c.classList.remove('sdb-tap'), 120);
      });
      // remove keyboard focus outline gracefully
      c.addEventListener('keydown', (e)=>{
        if (e.key === 'Enter' || e.key === ' ') {
          c.classList.add('sdb-tap');
          setTimeout(()=> c.classList.remove('sdb-tap'), 160);
        }
      });
    });

    // Make whole card clickable to add to cart (non-invasive)
    document.addEventListener('click', (e) => {
      const card = e.target.closest && e.target.closest('.card');
      if (!card) return;
      // ignore clicks on Remove / qty / buttons / links inside card
      if (e.target.closest('button') || e.target.closest('input') || e.target.closest('a')) return;
      // find add-btn inside and trigger it
      const addBtn = card.querySelector('.add-btn');
      if (addBtn) {
        // simulate click for existing handler
        addBtn.click();
        // tiny pulse
        addBtn.animate([{ transform: 'scale(1.06)' }, { transform: 'scale(1)' }], { duration: 200 });
      }
    }, true);

  } catch (err) {
    console.error('sdb-entrance error', err);
  }
})();
// ensure cart layout reactive: switch a class on small width for extra safety
(function(){ 
  function layoutGuard(){
    document.querySelectorAll('.card').forEach(c=>{
      if (window.innerWidth <= 420) c.classList.add('sdb-small-stack'); else c.classList.remove('sdb-small-stack');
    });
  }
  window.addEventListener('resize', layoutGuard);
  window.addEventListener('orientationchange', layoutGuard);
  document.addEventListener('DOMContentLoaded', layoutGuard);
})();
// after updateTotals() in render():
// force a tiny reflow to ensure CSS sizes recalc on mobile
requestAnimationFrame(()=> {
  document.querySelectorAll('.card .lineTotal').forEach(el => {
    el.style.display = 'inline-block';
    // remove temporary inline style after a tick
    setTimeout(()=> el.style.display = '', 60);
  });
});

</script>
<!-- ---- END INLINE FIX ---- -->

 </body>
</html>
